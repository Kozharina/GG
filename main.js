(()=>{"use strict";const t={mainElement:document.getElementById("main"),suit:["spades","hearts","diamonds","clubs"],rank:["A","K","Q","J","10","9","8","7","6"],randomPreset:new Array,difficulty:"",selectedCard:"clear",index:0,timer:"",timerCheck:"on"};function e(){document.querySelector(".difficulty__buttonStart").addEventListener("click",(()=>{t.selectedCard="clear",t.index=0,c()}))}function n(e){const n=[];for(let s=0;s<e;s++){0===t.suit.length&&(t.suit=["spades","hearts","diamonds","clubs"]),0===t.rank.length&&(t.rank=["A","K","Q","J","10","9","8","7","6"]);const e=Math.floor(Math.random()*t.suit.length),i=Math.floor(Math.random()*t.rank.length);n[s]=t.suit[e]+t.rank[i],t.suit.splice(e,1),t.rank.splice(i,1)}return[...n,...n]}function s(e){t.index=e;const n=[];for(let s=0;s<e;s++){const e=Math.floor(Math.random()*t.randomPreset.length);n[s]=`\n        <button data-preset="${t.randomPreset[e]}" class="game__cards-button preset__${t.randomPreset[e]}"></button>\n        `,t.randomPreset.splice(e,1)}return n.join("")}const i='\n<div class="game__title">\n    <div class="game__time-box">\n        <div class="game__text-box">\n            <p class="game__text">min</p>\n            <p class="game__text">sek</p>\n        </div>\n        <span id="timer" class="game__time">00:00</span>\n    </div>\n    <button class="game__again-button">Начать заново</button>\n</div>\n';function a(){switch(t.difficulty){case"easy":t.randomPreset=n(3),t.mainElement.innerHTML=`\n            <div class="game">\n                ${i}\n                <div class="game__cards">\n                    ${s(6)}\n                </div>\n            </div>\n            `;break;case"average":t.randomPreset=n(6),t.mainElement.innerHTML=`\n            <div class="game">\n                ${i}\n                <div class="game__cards">\n                    ${s(12)}\n                </div>\n            </div>\n            `;break;case"hard":t.randomPreset=n(9),t.mainElement.innerHTML=`\n            <div class="game">\n                ${i}\n                <div class="game__cards">\n                    ${s(18)}\n                </div>\n            </div>\n            `}document.querySelector(".game__again-button").addEventListener("click",(()=>{t.selectedCard="clear",t.timerCheck="on",c()})),function(){const n=document.querySelectorAll(".game__cards-button");let s=0;setTimeout((()=>{t.timerCheck="off",function(){const e=document.getElementById("timer");let n,s=0,i=0;function a(){"on"!==t.timerCheck?(s++,s>=60&&(s=0,i++,i>=60&&(i=0)),e.innerHTML=(i>9?i:"0"+i)+":"+(s>9?s:"0"+s),t.timer=e.innerHTML,c()):clearTimeout(n)}function c(){n=setTimeout(a,1e3)}c()}();for(const t of n)t instanceof HTMLElement&&t.classList.remove(`preset__${t.dataset.preset}`);for(const i of n)i instanceof HTMLElement&&i.addEventListener("click",(()=>{switch(i.classList.add("button-active"),i.classList.add(`preset__${i.dataset.preset}`),t.selectedCard){case"clear":t.selectedCard=i.dataset.preset,i.dataset.preset="open";break;case"open":t.selectedCard="clear";break;case i.dataset.preset:if(s+=2,t.index===s)return t.timerCheck="on",t.mainElement.innerHTML=`\n<section class="difficulty">\n<h1 class="difficulty__win"></h1>\n<h2 class="difficulty__title-win">Вы выиграли!</h2>\n<p class="difficulty__text">Затраченное время:</p>\n<p class="difficulty__timer">${t.timer}</p>\n<button class="difficulty__buttonStart">Играть снова</button>\n</section>\n`,void e();t.selectedCard="clear",i.dataset.preset="open";break;default:t.timerCheck="on",t.mainElement.innerHTML=`\n<section class="difficulty">\n<h1 class="difficulty__lose"></h1>\n<h2 class="difficulty__title-win">Вы проиграли!</h2>\n<p class="difficulty__text">Затраченное время:</p>\n<p class="difficulty__timer">${t.timer}</p>\n<button class="difficulty__buttonStart">Играть снова</button>\n</section>\n`,e()}}))}),5e3)}()}function c(){t.mainElement.innerHTML='\n<section class="difficulty">\n<h1 class="difficulty__title">Выбери сложность</h1>\n<div class="difficulty__choose">\n    <button class="difficulty__chooseButton">1</button>\n    <button class="difficulty__chooseButton">2</button>\n    <button class="difficulty__chooseButton">3</button>\n</div>\n<button class="difficulty__buttonStart">Старт</button>\n</section>\n',function(){const e=document.querySelectorAll(".difficulty__chooseButton"),n=document.querySelector(".difficulty__buttonStart");for(const n of e)n.addEventListener("click",(()=>{for(const t of e)t.classList.remove("button-active");switch(n.classList.add("button-active"),n.textContent){case"1":t.difficulty="easy";break;case"2":t.difficulty="average";break;case"3":t.difficulty="hard"}}));n.addEventListener("click",(()=>{t.difficulty?a():alert("С начало выберете сложность")}))}()}c()})();